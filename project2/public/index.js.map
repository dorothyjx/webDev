{"version":3,"file":"index.js","mappings":"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","sources":["webpack://project2/./src/fetch.js","webpack://project2/./src/state.js","webpack://project2/./src/web.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/./src/index.js"],"sourcesContent":["export function fetchSession() {\n\treturn fetch(\"/api/session\")\n\t.catch((err) => {\n\t\treturn Promise.reject({error: \"network-error\"});\n\t})\n\t.then((res) => {\n\t\tif (!res.ok) {\n\t\treturn Promise.reject({ error: \"Invalid User\" });\n\t\t}\n\t\treturn res.json();\n\t})\n}\n\nexport function fetchLogin(username) {\n\treturn fetch('/api/session/', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'content-type': 'application/json', \n\t\t},\n\t\tbody: JSON.stringify( { username } ),\n\t})\n\t.catch( err => Promise.reject({ error: 'network-error' }) )\n\t.then( response => {\n\t\tif(!response.ok) {\n\t\t\treturn response.json().then( err => Promise.reject(err) );\n\t\t}\n\t\treturn response.json(); \n\t});\n}\n\nexport function fetchLogout() {\n\treturn fetch('/api/session/', {\n\t\tmethod: 'DELETE',\n\t\theaders: {\n\t\t\t'content-type': 'application/json', \n\t\t},\n\t})\n\t.catch((err) => Promise.reject({ error: \"network-error\" }))\n\t.then( res => {\n\t\tif(!res.ok) {\n\t\t\treturn res.json().then( err => Promise.reject(err));\n\t\t}\n\t\treturn res.json();\n\t})\n}\n\n\nexport function fetchHistory() {\n    return fetch('/api/chat')\n\t.catch(() => Promise.reject({ error: 'networkError' }))\n\t.then( res => {\n\t\tif(!res.ok) {\n\t\t\treturn res.json().then( err => Promise.reject(err));\n\t\t}\n\t\treturn res.json();\n\t});\n}\n\nexport function fetchNewMessage(text) {\n    return fetch('/api/chat', {\n\t\tmethod: 'POST',\n\t\theaders: new Headers({\n\t\t\t'content-type': 'application/json',\n\t\t}),\n\t\tbody: JSON.stringify({ text }),\n\t})\n\t.catch(() => Promise.reject({ error: 'networkError' }))\n\t.then( res => {\n\t\tif(!res.ok) {\n\t\t\treturn res.json().then( err => Promise.reject(err));\n\t\t}\n\t\treturn res.json();\n\t});\n}\n\n\nexport function fetchAllUsers() {\n\treturn fetch('/api/sessionusers')\n\t.catch(() => Promise.reject({ error: 'networkError' }))\n\t.then( res => {\n\t\tif(!res.ok) {\n\t\t\tconsole.log(\"error\");\n\t\t\treturn res.json().then( err => Promise.reject(err));\n\t\t}\n\t\tconsole.log(res);\n\t\treturn res.json();\n\t});\n}","const state = {\n    username: '',\n    isLoggedIn: false,\n    messages: {},\n    errMsg: '',\n    availableUsers: {},\n};\n\nexport default state;","import { fetchHistory, fetchNewMessage, fetchLogin, fetchLogout, fetchAllUsers, fetchSession } from \"./fetch\";\nimport state from \"./state\";\nconst app = document.querySelector(\"#app\");\n//const availableUsers = [];\n\nexport function submitHandler() {\n\t//const app = document.querySelector(\"#app\");\n\tapp.addEventListener(\"submit\", e => {\n\t\te.preventDefault();\n\t\tif(e.target.classList.contains(\"login\")) {\n\t\t\tuserLogin();\n\t\t\treturn;\n\t\t}\n\n\t\tif(e.target.classList.contains(\"send-msg\")) {\n\t\t\tsendNewMsg();\n\t\t\treturn;\n\t\t}\n\n\t\tif(e.target.classList.contains(\"logout\")) {\n\t\t\tuserLogout();\n\t\t\treturn;\n\t\t}\n\t});\n}\n\nexport const webRender = () => {\n\tif(state.isLoggedIn === false) {\n\t\tloginWeb();\n\t\treturn;\n\t}\n\tchatWeb();\n}\n\nexport function loginWeb() {\n\t//const app = document.querySelector(\"#app\");\n\tapp.innerHTML = `\n\t\t<div class=\"login-card\">\n\t\t\t<form class=\"login\">\n\t\t\t\t<label>Type Your Username</label>\n\t\t\t\t<input type=\"text\" name=\"username\" placeholder=\"Username\" class=\"username\"/>\n\t\t\t\t<button type=\"submit\">Login</button>\n\t\t\t</form>\n\t\t\t<p class=\"error\">${state.errMsg}</p>\n\t\t</div>\n\t`\n}\n\nexport function chatWeb() {\n\t//const app = document.querySelector(\"#app\");\n\tapp.innerHTML = `\n\t\t<div class=\"msg-card\">\n\n\t\t\t<div class=\"online-users\"></div>\n\t\t\t<div class=\"list-container\"></div>\n\n\t\t\t<form class=\"send-msg\">\n\t\t\t\t<input type=\"text\" placeholder=\"Type message\" class=\"new_message\" />\n\t\t\t\t<button type=\"submit\">Send</button>\n\t\t\t</form>\n\n\t\t\t<p>${state.errMsg}</p>\n\n\t\t\t<form class=\"logout\">\n\t\t\t\t<button type=\"submit\">Logout</button>\n\t\t\t</form>\n\t\t</div>\n\t`\n}\n\n\nexport function msgWeb() {\n\tconst msgList = app.querySelector(\".list-container\");\n\tif(state.messages) {\n\t\treturn msgList.innerHTML = `\n\t\t\t<ul class=\"msg-list\">` + \n\t\t\tObject.values(state.messages).map(msg => `\n\t\t\t\t<li>\n\t\t\t\t\t<span>${msg.username} : ${msg.text}</span>\n\t\t\t\t</li>\n\t\t\t`).join('') + \n\t\t\t`</ul>`\n\t} else {\n\t\treturn ``\n\t}\n}\n\nfunction userList() {\n\t//const app = document.querySelector(\"#app\");\n\tconst users = app.querySelector(\".online-users\");\n\n\treturn users.innerHTML = `<ul class=\"users\"> Online Users: ` + \n\t\tObject.values(state.availableUsers).map(user => `\n\t\t\t<li>\n\t\t\t\t<span> ${user.username} </span>\n\t\t\t</li>\n\t\t`).join('') + \n\t`</ul>`\n}\n\nconst userLogin = () => {\n\tconst username = document.querySelector(\".username\").value;\n\tfetchLogin(username)\n\t.then(fetchHistory)\n\t.then((chatHistory) => {\n\t\tstate.username = username;\n\t\tstate.isLoggedIn = true;\n\t\tstate.messages = chatHistory;\n\t\tstate.errMsg = \"\";\n\t\t// webRender();\n\t\tfetchAllUsers()\n\t\t.then((user_list) => {\n\t\t\tstate.availableUsers = user_list; \n\t\t\twebRender();\n\t\t})\n\t\t.catch((error) => {\n\t\t\tstate.errMsg = \"network wrong\"\n\t\t\twebRender();\n\t\t})\n\t})\n\t.catch((error) => {\n\t\tconsole.log(error);\n\t\tstate.errMsg = \"Invalid Username\";\n\t\twebRender();\n\t});\n};\n\nconst userLogout = () => {\n\tconst username = state.username; \n\tfetchLogout()\n\t.then(() => {\n\t\tstate.isLoggedIn = false;\n\t\tstate.username = \"\";\n\t\tstate.messages = {};\n\t\tstate.errMsg = \"\";\n\t\twebRender();\n\t});\n};\n\nconst sendNewMsg = () => {\n\tconst message = document.querySelector(\".new_message\").value;\n\tfetchNewMessage(message) \n\t.then((chatHistory) => {\n\t\tstate.isLoggedIn = true;\n\t\tstate.messages = chatHistory;\n\t\tstate.errMsg = \"\";\n\t\tmsgWeb();\n\t})\n\t.catch((error) => {\n\t\tstate.errMsg = \"Invalid Message\";\n\t\twebRender();\n\t})\n}\n\n\nexport function initPolling() {\n\tsetInterval(() => {\n\t\treturn fetchHistory()\n\t\t.then((chatHistory) => {\n\t\t\tstate.messages = chatHistory;\n\t\t\tstate.isLoggedIn = true;\n\t\t\tfetchAllUsers()\n\t\t\t\t.then((user_list) => {\n\t\t\t\t\tstate.availableUsers = user_list; \n\t\t\t\t\tmsgWeb();\n\t\t\t\t\tuserList();\n\t\t\t\t\t//webRender();\n\t\t\t\t})\n\t\t\t})\n\t\t.catch(() => console.warn(\"should have an error in polling #179\"))\n\t}, 5000);\n}\n\n// function startPolling() {\n// \treturn new Promise((resolve, reject) => {\n// \t  const intervalId = setInterval(() => {\n// \t\tfetchHistory()\n// \t\t  .then((chatHistory) => {\n// \t\t\tstate.messages = chatHistory;\n// \t\t\tstate.isLoggedIn = true;\n// \t\t\tfetchAllUsers()\n// \t\t\t  .then((user_list) => {\n// \t\t\t\tstate.availableUsers = user_list;\n// \t\t\t\tmsgWeb();\n// \t\t\t\tuserList();\n// \t\t\t\t//webRender();\n// \t\t\t\tresolve(); // resolve the promise when updates are complete\n// \t\t\t  })\n// \t\t\t  .catch((error) => {\n// \t\t\t\tconsole.warn(\"Error fetching user list\", error);\n// \t\t\t\treject(error);\n// \t\t\t  });\n// \t\t  })\n// \t\t  .catch((error) => {\n// \t\t\tconsole.warn(\"Error fetching chat history\", error);\n// \t\t\treject(error);\n// \t\t  });\n// \t  }, 5000);\n// \t});\n//   }","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { fetchSession, fetchLogin, fetchHistory, fetchNewMessage, fetchLogout, fetchAllUsers } from \"./fetch\";\nimport state from \"./state.js\";\nimport { msgWeb, submitHandler, webRender, initPolling } from \"./web\";\n\nsubmitHandler();\n\nsetTimeout(() => {\n\tfetchSession()\n\t.then(fetchHistory)\n\t.then((chatHistory) => {\n\t\tstate.messages = chatHistory;\n\t\tstate.isLoggedIn = true;\n\t\tfetchAllUsers()\n\t\t\t.then((user_list) => {\n\t\t\t\tstate.availableUsers = user_list; \n\t\t\t\twebRender();\n\t\t\t\tinitPolling();\n\t\t\t\t// startPolling();\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tstate.errMsg = \"network wrong\"\n\t\t\t\t//webRender();\n\t\t\t\tinitPolling();\n\t\t\t\t// startPolling();\n\t\t\t})\n\t})\n\t.catch(() => {\n\t\twebRender();\n\t\tinitPolling();\n\t\t// startPolling();\n\t});\n}, 500);\n\n// function initPolling() {\n// \tsetInterval(() => {\n// \t\treturn fetchSession()\n// \t\t.then(fetchHistory)\n// \t\t.then((chatHistory) => {\n// \t\t\tstate.messages = chatHistory;\n// \t\t\tstate.isLoggedIn = true;\n// \t\t\tfetchAllUsers()\n// \t\t\t\t.then((user_list) => {\n// \t\t\t\t\tstate.availableUsers = user_list; \n// \t\t\t\t\tmsgWeb();\n// \t\t\t\t\t//webRender();\n// \t\t\t\t})\n// \t\t\t})\n// \t}, 3000);\n// }"],"names":["fetchSession","fetch","err","Promise","reject","error","then","res","ok","json","fetchLogin","username","method","headers","body","JSON","stringify","response","fetchLogout","fetchHistory","fetchNewMessage","text","Headers","fetchAllUsers","console","log","state","isLoggedIn","messages","errMsg","availableUsers","app","document","querySelector","submitHandler","addEventListener","e","preventDefault","target","classList","contains","userLogin","sendNewMsg","userLogout","webRender","loginWeb","chatWeb","innerHTML","concat","msgWeb","msgList","Object","values","map","msg","join","userList","users","user","value","chatHistory","user_list","message","initPolling","setInterval","warn","setTimeout"],"sourceRoot":""}